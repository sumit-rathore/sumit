//#################################################################################################
// Icron Technology Corporation - Copyright 2016
//
// This source file and the information contained in it are confidential and proprietary to Icron
// Technology Corporation. The reproduction or disclosure, in whole or in part, to anyone outside
// of Icron without the written approval of a Icron officer under a Non-Disclosure Agreement, or to
// any employee of Icron who has not previously obtained written authorization for access from the
// individual responsible for the source code, will have a significant detrimental effect on Icron
// and is expressly prohibited.
//#################################################################################################

//#################################################################################################
// Module Description
//#################################################################################################
// This file contains the diff registers used to configure IDT clock generator 5P49V6913.

//#################################################################################################


//#################################################################################################
// Design Notes
//#################################################################################################
// This file is generated by executing i2cd_idt_clk.py.


//#################################################################################################

// Includes #######################################################################################
#include <ibase.h>
#include "idt_clk_log.h"
#include "idt_clk_loc.h"

// Constants and Macros ###########################################################################

// Data Types #####################################################################################

// Static Function Declarations ###################################################################

// Global Variables ###############################################################################

// This is for IDT6913. It will be removed ===========================================
const struct IdtClkRegMap lexIdtClkCfg[] =
{
    {.regOffset = 0x0, .regValue = 0x61},
    {.regOffset = 0xb, .regValue = 0xc0},
    {.regOffset = 0x10, .regValue = 0x88},
    {.regOffset = 0x17, .regValue = 0x3},
    {.regOffset = 0x18, .regValue = 0x20},
    {.regOffset = 0x1c, .regValue = 0x9f},
    {.regOffset = 0x1e, .regValue = 0xf0},
    {.regOffset = 0x1f, .regValue = 0x80},
    {.regOffset = 0x21, .regValue = 0x0},
    {.regOffset = 0x3a, .regValue = 0x4},
    {.regOffset = 0x4a, .regValue = 0x4},
    {.regOffset = 0x51, .regValue = 0x81},
    {.regOffset = 0x5a, .regValue = 0x4},
    {.regOffset = 0x5e, .regValue = 0x80},
    {.regOffset = 0x61, .regValue = 0x0},
    {.regOffset = 0x62, .regValue = 0xbb},
    {.regOffset = 0x64, .regValue = 0xbb},
    {.regOffset = 0x66, .regValue = 0x63},
    {.regOffset = 0x67, .regValue = 0x1},
    {.regOffset = 0x68, .regValue = 0xfc},
    {.regOffset = 0x69, .regValue = 0x8c},
    {.regOffset = 0x6f, .regValue = 0xb0},
    {.regOffset = 0x74, .regValue = 0x4e},
    {.regOffset = 0x76, .regValue = 0x63},
    {.regOffset = 0x77, .regValue = 0x0},
    {.regOffset = 0x78, .regValue = 0x0},
    {.regOffset = 0x99, .regValue = 0x0},
    {.regOffset = 0x9d, .regValue = 0x0},
    {.regOffset = 0x9e, .regValue = 0x0},
    {.regOffset = 0x9f, .regValue = 0x0}
};

const struct IdtClkRegMap rexIdtClkCfg[] =
{
    {.regOffset = 0x0, .regValue = 0x61},
    {.regOffset = 0xb, .regValue = 0xc0},
    {.regOffset = 0x10, .regValue = 0x88},
    {.regOffset = 0x17, .regValue = 0x3},
    {.regOffset = 0x18, .regValue = 0x20},
    {.regOffset = 0x1c, .regValue = 0x9f},
    {.regOffset = 0x1e, .regValue = 0xf0},
    {.regOffset = 0x1f, .regValue = 0x80},
    {.regOffset = 0x22, .regValue = 0x1},
    {.regOffset = 0x23, .regValue = 0x9},
    {.regOffset = 0x24, .regValue = 0x7b},
    {.regOffset = 0x25, .regValue = 0x44},
    {.regOffset = 0x2e, .regValue = 0x90},
    {.regOffset = 0x3a, .regValue = 0x4},
    {.regOffset = 0x4a, .regValue = 0x4},
    {.regOffset = 0x51, .regValue = 0x81},
    {.regOffset = 0x5a, .regValue = 0x4},
    {.regOffset = 0x5e, .regValue = 0x80},
    {.regOffset = 0x60, .regValue = 0x63},
    {.regOffset = 0x62, .regValue = 0xbb},
    {.regOffset = 0x64, .regValue = 0xbb},
    {.regOffset = 0x66, .regValue = 0x63},
    {.regOffset = 0x67, .regValue = 0x1},
    {.regOffset = 0x68, .regValue = 0xfc},
    {.regOffset = 0x69, .regValue = 0xcc},
    {.regOffset = 0x6f, .regValue = 0xb0},
    {.regOffset = 0x74, .regValue = 0x4e},
    {.regOffset = 0x76, .regValue = 0x63},
    {.regOffset = 0x77, .regValue = 0x0},
    {.regOffset = 0x78, .regValue = 0x0},
    {.regOffset = 0x99, .regValue = 0x0},
    {.regOffset = 0x9d, .regValue = 0x0},
    {.regOffset = 0x9e, .regValue = 0x0},
    {.regOffset = 0x9f, .regValue = 0x0}
};

const struct IdtClkRegMap rexIdtClkEnableSscCfg[] =
{
    {.regOffset = 0x25, .regValue = 0x46},
    {.regOffset = 0x27, .regValue = 0x1},
    {.regOffset = 0x28, .regValue = 0x6a},
    {.regOffset = 0x29, .regValue = 0x42},
    {.regOffset = 0x2a, .regValue = 0xfc}
};

const struct IdtClkRegMap rexIdtClkDisableSscCfg[] =
{
    {.regOffset = 0x25, .regValue = 0x44},
    {.regOffset = 0x27, .regValue = 0x0},
    {.regOffset = 0x28, .regValue = 0x0},
    {.regOffset = 0x29, .regValue = 0x0},
    {.regOffset = 0x2a, .regValue = 0x4}
};

struct IdtClkRegMap divider1Fraction[] =
{
    {.regOffset = 0x22, .regValue = 0},
    {.regOffset = 0x23, .regValue = 0},
    {.regOffset = 0x24, .regValue = 0},
    {.regOffset = 0x25, .regValue = 0},
};

const struct IdtClkConfiguraton idtConfig[NUMBER_CFG_TYPES] = {
    [IDT_LEX_CFG] = {
        .idtClkCfg = lexIdtClkCfg,
        .regMapSize = ARRAYSIZE(lexIdtClkCfg)
    },
    [IDT_REX_CFG]= {
        .idtClkCfg = rexIdtClkCfg,
        .regMapSize = ARRAYSIZE(rexIdtClkCfg)
    },
    [IDT_REX_ENABLE_SSC_CFG] = {
        .idtClkCfg = rexIdtClkEnableSscCfg,
        .regMapSize = ARRAYSIZE(rexIdtClkEnableSscCfg)
    },
    [IDT_REX_DISABLE_SSC_CFG] = {
        .idtClkCfg = rexIdtClkDisableSscCfg,
        .regMapSize = ARRAYSIZE(rexIdtClkDisableSscCfg)
    },
    [IDT_DIVIDER1_FRACTION_CFG] = {
        .idtClkCfg = divider1Fraction,
        .regMapSize = ARRAYSIZE(divider1Fraction)
    },
};

// Below HERE is for IDT6914 ====================================================
// Default IdtConfiguration value for LexRexUSB3 (w/o DP)
// Don't Add or Remove Values. Index is connected with Difference tables below
uint8_t idtConfiguration[IDT6914_REG_SIZE] =
{
    0x00,   // 0x00
    0x00,   // 0x01
    0x00,   // 0x02
    0x00,   // 0x03
    0x00,   // 0x04
    0x00,   // 0x05
    0x00,   // 0x06
    0x00,   // 0x07
    0x00,   // 0x08
    0x00,   // 0x09
    0x00,   // 0x0A
    0x00,   // 0x0B
    0x00,   // 0x0C
    0x00,   // 0x0D
    0x00,   // 0x0E
    0x10,   // 0x0F         // I2C Write Start Address
    0x88,   // 0x10         // Start of Register value to be written
    0x0C,   // 0x11
    0xC1,   // 0x12         // requested by Bug#5027
    0xC0,   // 0x13         // requested by Bug#5027
    0x00,   // 0x14
    0x03,   // 0x15
    0x8C,   // 0x16
    0x03,   // 0x17
    0x20,   // 0x18
    0x00,   // 0x19
    0x00,   // 0x1A
    0x00,   // 0x1B
    0x9F,   // 0x1C
    0xFF,   // 0x1D
    0xF0,   // 0x1E
    0x80,   // 0x1F
    0x00,   // 0x20
    0x00,   // 0x21
    0x01,   // 0x22
    0x09,   // 0x23
    0x7B,   // 0x24
    0x44,   // 0x25
    0x00,   // 0x26
    0x00,   // 0x27
    0x00,   // 0x28
    0x00,   // 0x29
    0x04,   // 0x2A
    0x00,   // 0x2B
    0x00,   // 0x2C
    0x00,   // 0x2D
    0x90,   // 0x2E
    0x00,   // 0x2F
    0x00,   // 0x30
    0x81,   // 0x31
    0x00,   // 0x32
    0x00,   // 0x33
    0x00,   // 0x34
    0x00,   // 0x35
    0x00,   // 0x36
    0x00,   // 0x37
    0x00,   // 0x38
    0x00,   // 0x39
    0x04,   // 0x3A
    0x00,   // 0x3B
    0x00,   // 0x3C
    0x00,   // 0x3D
    0x80,   // 0x3E
    0x00,   // 0x3F
    0x00,   // 0x40
    0x81,   // 0x41
    0x01,   // 0x42
    0x00,   // 0x43
    0x00,   // 0x44
    0x02,   // 0x45
    0x00,   // 0x46
    0x10,   // 0x47
    0x20,   // 0x48
    0x13,   // 0x49
    0xDC,   // 0x4A
    0x00,   // 0x4B
    0x00,   // 0x4C
    0x01,   // 0x4D
    0xF0,   // 0x4E
    0x00,   // 0x4F
    0x00,   // 0x50
    0x00,   // 0x51
    0x00,   // 0x52
    0x00,   // 0x53
    0x00,   // 0x54
    0x00,   // 0x55
    0x00,   // 0x56
    0x00,   // 0x57
    0x00,   // 0x58
    0x00,   // 0x59
    0x04,   // 0x5A
    0x00,   // 0x5B
    0x00,   // 0x5C
    0x00,   // 0x5D
    0x00,   // 0x5E
    0x00,   // 0x5F
    0x63,   // 0x60
    0x00,   // 0x61
    0x63,   // 0x62
    0x01,   // 0x63
    0x83,   // 0x64
    0x01,   // 0x65
    0xBB,   // 0x66
    0x00,   // 0x67
    0xFC,   // 0x68
    0xB4    // 0x69
};

// Difference table for RexUsb3Dp from Default table (lexRexUsb3)
const struct IdtClkRegMap IDT6914_rexUsb3Dp[] =
{
    {.regOffset = 0x21, .regValue = 0x81},
    {.regOffset = 0x61, .regValue = 0x1},
    {.regOffset = 0x69, .regValue = 0xf4}
};

// Difference table for RexUsb2 from Default table (lexRexUsb3)
const struct IdtClkRegMap IDT6914_rexUsb2Dp[] =
{
    {.regOffset = 0x21, .regValue = 0x81},
    {.regOffset = 0x41, .regValue = 0x0},
    {.regOffset = 0x42, .regValue = 0x0},
    {.regOffset = 0x45, .regValue = 0x0},
    {.regOffset = 0x47, .regValue = 0x0},
    {.regOffset = 0x48, .regValue = 0x0},
    {.regOffset = 0x49, .regValue = 0x0},
    {.regOffset = 0x4a, .regValue = 0x4},
    {.regOffset = 0x4d, .regValue = 0x0},
    {.regOffset = 0x4e, .regValue = 0x0},
    {.regOffset = 0x61, .regValue = 0x1},
    {.regOffset = 0x64, .regValue = 0xbb},
    {.regOffset = 0x65, .regValue = 0x0},
    {.regOffset = 0x69, .regValue = 0xe4}
};

// Difference table for LexUsb2 from Default table (lexRexUsb3)
const struct IdtClkRegMap IDT6914_lexUsb2[] =
{
    {.regOffset = 0x22, .regValue = 0x0},
    {.regOffset = 0x23, .regValue = 0x0},
    {.regOffset = 0x24, .regValue = 0x0},
    {.regOffset = 0x25, .regValue = 0x0},
    {.regOffset = 0x2e, .regValue = 0xe0},
    {.regOffset = 0x41, .regValue = 0x0},
    {.regOffset = 0x42, .regValue = 0x0},
    {.regOffset = 0x45, .regValue = 0x0},
    {.regOffset = 0x47, .regValue = 0x0},
    {.regOffset = 0x48, .regValue = 0x0},
    {.regOffset = 0x49, .regValue = 0x0},
    {.regOffset = 0x4a, .regValue = 0x4},
    {.regOffset = 0x4d, .regValue = 0x0},
    {.regOffset = 0x4e, .regValue = 0x0},
    {.regOffset = 0x60, .regValue = 0xbb},
    {.regOffset = 0x64, .regValue = 0xbb},
    {.regOffset = 0x65, .regValue = 0x0},
    {.regOffset = 0x69, .regValue = 0xa4}
};

// Difference table for RexUsb3DpSSC from Default table (lexRexUsb3)
const struct IdtClkRegMap IDT6914_rexUsb3DpSsc[] =
{
    {.regOffset = 0x21, .regValue = 0x81},
    {.regOffset = 0x25, .regValue = 0x46},
    {.regOffset = 0x27, .regValue = 0x1},
    {.regOffset = 0x28, .regValue = 0x5b},      // From 0x6a to 0x5b -5000ppm to -4800ppm
    {.regOffset = 0x29, .regValue = 0x42},
    {.regOffset = 0x2a, .regValue = 0xfc},
    {.regOffset = 0x61, .regValue = 0x1},
    {.regOffset = 0x69, .regValue = 0xf4}
};

// Difference table for RexUsb2DpSSC from Default table (lexRexUsb3)
const struct IdtClkRegMap IDT6914_rexUsb2DpSsc[] =
{
    {.regOffset = 0x21, .regValue = 0x81},
    {.regOffset = 0x25, .regValue = 0x46},
    {.regOffset = 0x27, .regValue = 0x1},
    {.regOffset = 0x28, .regValue = 0x5b},      // From 0x6a to 0x5b -5000ppm to -4800ppm
    {.regOffset = 0x29, .regValue = 0x42},
    {.regOffset = 0x2a, .regValue = 0xfc},
    {.regOffset = 0x41, .regValue = 0x0},
    {.regOffset = 0x42, .regValue = 0x0},
    {.regOffset = 0x45, .regValue = 0x0},
    {.regOffset = 0x47, .regValue = 0x0},
    {.regOffset = 0x48, .regValue = 0x0},
    {.regOffset = 0x49, .regValue = 0x0},
    {.regOffset = 0x4a, .regValue = 0x4},
    {.regOffset = 0x4d, .regValue = 0x0},
    {.regOffset = 0x4e, .regValue = 0x0},
    {.regOffset = 0x61, .regValue = 0x1},
    {.regOffset = 0x64, .regValue = 0xbb},
    {.regOffset = 0x65, .regValue = 0x0},
    {.regOffset = 0x69, .regValue = 0xe4}
};

const struct IdtClkConfiguraton idt6914DiffConfig[IDT_CFG_TYPES_NUMBER] = {
    [IDT_LEX_REX_USB3_CFG] = {
        .idtClkCfg = NULL,                              // This is because IDT_LEX_REX_USB3_CFG is default setting
        .regMapSize = 0
    },
    [IDT_REX_USB3_DP_CFG]= {
        .idtClkCfg = IDT6914_rexUsb3Dp,
        .regMapSize = ARRAYSIZE(IDT6914_rexUsb3Dp)
    },
    [IDT_REX_USB3_DP_SSC_CFG] = {
        .idtClkCfg = IDT6914_rexUsb3DpSsc,
        .regMapSize = ARRAYSIZE(IDT6914_rexUsb3DpSsc)
    },
    [IDT_LEX_USB2_CFG] = {
        .idtClkCfg = IDT6914_lexUsb2,
        .regMapSize = ARRAYSIZE(IDT6914_lexUsb2)
    },
    [IDT_REX_USB2_DP_CFG] = {
        .idtClkCfg = IDT6914_rexUsb2Dp,
        .regMapSize = ARRAYSIZE(IDT6914_rexUsb2Dp)
    },
    [IDT_REX_USB2_DP_SSC_CFG] = {
        .idtClkCfg = IDT6914_rexUsb2DpSsc,
        .regMapSize = ARRAYSIZE(IDT6914_rexUsb2DpSsc)
    },
};

//#################################################################################################
// Initialize IDT Clock Configuration registers
//  Copy Register Differences into idtConfiguration Array
//
// Parameters:
//      type    - type of IDT6914 clock configuration.
// Return:
// Assumptions:
//#################################################################################################
void I2CD_IdtClkCfgGenerateRegisters(enum IdtClkCfgType6914 type)
{
    iassert_IDT_CLK_COMPONENT_1(type < IDT_CFG_TYPES_NUMBER, IDT_CLK_INVALID_TYPE, type);

    const struct IdtClkRegMap *configuration = idt6914DiffConfig[type].idtClkCfg;

    if(configuration != NULL)
    {
        for(uint8_t i=0; i< idt6914DiffConfig[type].regMapSize; i++)
        {
            idtConfiguration[configuration[i].regOffset] = configuration[i].regValue;
        }
    }
}
